<!DOCTYPE html>
<html>
<head>
  <title>CMS</title>
  <style>
    body { font-family: Menlo, monospace; background: #111; color: #eee; padding: 2rem; }
    input, textarea { width: 100%; margin: 1rem 0; padding: 0.5rem; background: #222; color: #fff; border: 1px solid #333; }
    button { background: #7af; border: none; padding: 0.5rem 1rem; cursor: pointer; }
  </style>
</head>
<body>
  <div id="login" style="display: none;">
    <input type="password" id="password" placeholder="Enter password">
    <button onclick="checkPassword()">Login</button>
  </div>

  <div id="editor" style="display: none;">
    <input type="text" id="title" placeholder="Headline">
    <textarea id="content" rows="10" placeholder="Content (Markdown supported)"></textarea>
    <input type="file" id="image" accept="image/*">
    <button onclick="createPost()">Publish</button>
  </div>

  <script>
    // Simple password protection (replace 'password' with your actual password)
    const PASS = 'AhuiaFFar3$4tr!fdsfd';
    
    function checkPassword() {
      if(document.getElementById('password').value === PASS) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('editor').style.display = 'block';
      }
    }

    function createPost() {
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
      const file = document.getElementById('image').files[0];
      
      const reader = new FileReader();
      reader.onload = function(e) {
        const mdContent = `---
layout: post
title: "${title}"
date: ${new Date().toISOString()}
---

${content}

![Image](${e.target.result})
`;
        
        // In real usage, you'd send this to a server
        // For GitHub Pages, you need to commit this manually
        const blob = new Blob([mdContent], {type: 'text/plain'});
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${new Date().toISOString().split('T')[0]}-${title.toLowerCase().replace(/ /g, '-')}.md`;
        a.click();
      };

      if(file) reader.readAsDataURL(file);
      else alert('Post created (check your downloads)');
    }

    // Initial check
    document.getElementById('login').style.display = 'block';
  </script>
</body>
</html>
